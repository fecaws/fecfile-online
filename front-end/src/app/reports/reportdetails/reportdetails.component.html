<div class="report-table-container">
    <div class="grid-row float-right">
        <div class="float-right forms__trx-item-range">
            {{determineItemRange()}} of {{config.totalItems}}
        </div>
    </div>            
    <table class="table table-striped table-hover table__sortable forms__trx-table">
        <thead>
            <tr>
                <!--<th class="forms__trx-table-checkbox">
                    <input *ngIf="isReportViewActive()"
                        [(ngModel)]="allTransactionsSelected"
                        type="checkbox" (change)="changeAllTransactionsSelected()">
                </th> -->
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('form_type')"
                    [class]="getSortClass('form_type')" 
                    (click)="changeSortDirection('form_type')">Form
                </th>
                <th
                    [@fadeInOut] *ngIf="isColumnVisible('status')"
                    [class]="getSortClass('status')" 
                    (click)="changeSortDirection('status')">Status
                </th>
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('fec_id')"
                    [class]="getSortClass('fec_id')" 
                    (click)="changeSortDirection('fec_id')">FEC ID
                </th>
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('amend_ind')"
                    [class]="getSortClass('amend_ind')" 
                    (click)="changeSortDirection('amend_ind')">Amendment Indicator
                </th>   
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('cvg_start_date')"    
                    [class]="getSortClass('cvg_start_date')" 
                    (click)="changeSortDirection('cvg_start_date')">Coverage Date Cycle
                </th>                              
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('report_type_desc')"
                    [class]="getSortClass('report_type_desc')" 
                    (click)="changeSortDirection('report_type_desc')">Report
                </th>
                <th 
                    [@fadeInOut] *ngIf="isColumnVisible('filed_date')"
                    [class]="getSortClass('filed_date')" 
                    (click)="changeSortDirection('filed_date')">Filed/Saved Date
                </th>                        
                                                                    
               <!-- <th class="bulk_action">
                    <div *ngIf="isReportViewActive()" class="btn-group" 
                            ngbDropdown role="group" aria-label="Action dropdown">
                        <button class="btn btn-sm btn-primary reports__bulk_action_btn">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                        <div id="forms__trx-dropdown-action" class="dropdown-menu" ngbDropdownMenu>
                            <button class="dropdown-item" (click)="viewAllSelected()">
                                <i class="fas fa-eye"></i>View
                            </button>
                            <button class="dropdown-item" (click)="printAllSelected()">
                                <i class="fas fa-print"></i>Print
                            </button>
                            <button class="dropdown-item" (click)="trashAllSelected()">
                                <i class="fas fa-trash"></i>Trash
                            </button>
                        </div>
                    </div>                        
                </th>  -->
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let report of reportsModel | paginate: config; let i = index">
                <!--<td>
                    <input [(ngModel)]="report.selected"
                            type="checkbox">
                </td>-->

                <td *ngIf="isColumnVisible('form_type')">{{report.form_type}}</td>
                <td *ngIf="isColumnVisible('status')">{{report.status}}</td>
                <td *ngIf="isColumnVisible('fec_id')">{{report.status === 'Submitted' ? report.fec_id : '' }}</td>
                <td *ngIf="isColumnVisible('amend_ind')">{{report.form_type !== 'F99' ? report.amend_ind : '' }}</td>
                <td *ngIf="isColumnVisible('cvg_start_date')">{{report.form_type !== 'F99'? ( (report.cvg_start_date| date: 'MM/dd/yyyy') + " - "  + (report.cvg_end_date| date: 'MM/dd/yyyy' )) : '' }}</td>
                <td *ngIf="isColumnVisible('report_type_desc')">{{report.report_type_desc}}</td>
                <td *ngIf="isColumnVisible('filed_date')">{{report.status === 'Submitted'? (report.filed_date| date: 'MM/dd/yyyy') : (report.last_update_date| date: 'MM/dd/yyyy')}}</td>

                <td>
                    <div *ngIf="isRecycleBinViewActive()">
                        <button class="btn btn-sm btn-primary" 
                            (click)="restoreTransaction(report)">
                            <i class="fas fa-trash-restore"></i>
                        </button>                     
                    </div>
                    <div *ngIf="isReportViewActive()" class="btn-group" 
                            ngbDropdown role="group" aria-label="Action dropdown">
                        <button class= "btn btn-sm btn-primary"  ngbDropdownToggle>
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                        <div id="forms__trx-dropdown-action" *ngIf="report.form_type !== 'F99' && report.status === 'Saved'" class="dropdown-menu" ngbDropdownMenu>
                            <button class="dropdown-item" (click)="viewReport(report)">
                                <i class="fas fa-eye"></i>View
                            </button>
                            <button class="dropdown-item" (click)="editReport(report)">
                                <i class="fas fa-edit"></i>Edit
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsJSON(report)">
                                <i class="fa fa-file-text"></i>Download JSON
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsPDF(report)">
                                <i class=" fa fa-file-pdf-o"></i>Download PDF
                            </button>
                            <button class="dropdown-item" (click)="trashReport(report)">
                                <i class="fas fa-trash"></i>Trash
                            </button>
                        </div>

                        <div id="forms__trx-dropdown-action" *ngIf="report.form_type !== 'F99' && report.status === 'Submitted'" class="dropdown-menu" ngbDropdownMenu>
                            <button class="dropdown-item" (click)="viewReport(report)">
                                <i class="fas fa-eye"></i>View
                            </button>
                            <button class="dropdown-item" (click)="amendReport(report)">
                                <i class="fas fa-edit"></i>Amend
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsJSON(report)">
                                <i class="fa fa-file-text"></i>Download JSON
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsPDF(report)">
                                <i class=" fa fa-file-pdf-o"></i>Download PDF
                            </button>
                        </div>

                        <div id="forms__trx-dropdown-action" *ngIf="report.form_type === 'F99' && report.status === 'Submitted'" class="dropdown-menu" ngbDropdownMenu>
                            <button class="dropdown-item" (click)="viewReport(report)">
                                <i class="fas fa-eye"></i>View
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsJSON(report)">
                                <i class="fa fa-file-text"></i>Download JSON
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsPDF(report)">
                                <i class=" fa fa-file-pdf-o"></i>Download PDF
                            </button>
                        </div>

                        <div id="forms__trx-dropdown-action" *ngIf="report.form_type === 'F99' && report.status === 'Saved'" class="dropdown-menu" ngbDropdownMenu>
                            <button class="dropdown-item" (click)="viewReport(report)">
                                <i class="fas fa-eye"></i>View
                            </button>
                            <button class="dropdown-item" (click)="editReport(report)">
                                <i class="fas fa-edit"></i>Edit
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsJSON(report)">
                                <i class="fa fa-file-text"></i>Download JSON
                            </button>
                            <button class="dropdown-item" (click)="downloadReportAsPDF(report)">
                                <i class=" fa fa-file-pdf-o"></i>Download PDF
                            </button>
                            <button class="dropdown-item" (click)="trashReport(report)">
                                <i class="fas fa-trash"></i>Trash
                            </button>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <hr/> 
    <div *ngIf="showPagination()" 
        class="d-flex justify-content-center Report-table-pagination-container">
        <pagination-controls [id]="config.id"
            (pageChange)="getPage($event)">
        </pagination-controls>	
    </div>
    
    <div bsModal #columnOptionsModal="bs-modal" class="modal fade column-options-modal" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title pull-left">Column Options</h4>
                    <button aria-label="Close" class="close btn btn-link" type="button" 
                            (click)="cancelColumnOptions()">
                        <span aria-hidden="true">×</span>
                    </button>                
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('form_type').checked"
                                        (change)="toggleVisibility('form_type', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('form_type').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('form_type').disabled}">
                                            Form
                                        </span>                                         
                                    </label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('status').checked"
                                            (change)="toggleVisibility('status', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('status').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('status').disabled}">
                                            Status
                                        </span>                                          
                                    </label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('fec_id').checked"
                                            (change)="toggleVisibility('fec_id', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('fec_id').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('fec_id').disabled}">
                                            FEC ID
                                        </span>                                         
                                    </label>
                                </div>
                            </div>                                   
                        </div>
                        <div class="row">
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('amend_ind').checked"
                                        (change)="toggleVisibility('amend_ind', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('amend_ind').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('amend_ind').disabled}">
                                            Amendment Indicator
                                        </span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('cvg_start_date').checked"
                                            (change)="toggleVisibility('cvg_start_date', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('cvg_start_date').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('cvg_start_date').disabled}">
                                            Coverage Date Cycle
                                        </span>   
                                    </label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('report_type_desc').checked"
                                            (change)="toggleVisibility('report_type_desc', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('report_type_desc').disabled">
                                        <span [ngClass]=
                                            "{'disabled-column-option':getSortableColumn('report_type_desc').disabled}">
                                            Report
                                        </span>          
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md">
                                <div class="checkbox">
                                    <label>
                                        <input [(ngModel)]="getSortableColumn('last_update_date').checked"
                                            (change)="toggleVisibility('last_update_date', $event)"
                                            type="checkbox" [disabled]="getSortableColumn('last_update_date').disabled">
                                        <span [ngClass]="{'disabled-column-option':getSortableColumn('last_update_date').disabled}">
                                            Filed Date
                                        </span>                                        
                                    </label>
                                </div>
                            </div>
                        </div>  
                     </div>
                </div> 
                <div class="modal-footer">
                    <button type="button" id="btn-cancel" class="btn btn-modal-footer btn-right"
                        (click)="cancelColumnOptions()">
                        Cancel
                    </button>
                    <button type="button" class="btn btn-secondary btn-modal-footer btn-right" (click)="saveColumnOptions()">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div> 
</div>
