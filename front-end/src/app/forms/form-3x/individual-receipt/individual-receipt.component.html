<div class="individual-receipt-container">
  <form [formGroup]="frmIndividualReceipt">
    <section>
      <div class="row">
        <div class="col">
          <label for="transactionCategory">
            Transaction Category *
             <button
                type="button"
                class="btn btn-info"
                ngbTooltip="Waiting for text."
                tooltipClass="form-tooltip"
              >
                <i class="info-icon" aria-hidden="true"></i>
                <span class="sr-only">Click here for more information</span>
              </button>
          </label>
          <ng-select
            name="transactionCategory"
            class="transaction-category-select"
            [items]="transactionCategories"
            bindLabel="text"
            bindValue="value"
            groupBy="type"
            (change)="transactionCategorySelected($event)"
            formControlName="transactionCategory"
          >
            <ng-template ng-optgroup-tmp let-item="item">
              {{item.type || 'Unnamed group'}}
            </ng-template>
          </ng-select>
          <div
            class="error-text"
            *ngIf="(frmIndividualReceipt.invalid && (frmIndividualReceipt.dirty || frmIndividualReceipt.touched))"
          >
            <div
              class="text-error text-left"
              *ngIf="frmIndividualReceipt.controls.transactionCategory.errors?.required"
            >
              You must select a transaction category.
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="transactionType">
            Transaction Type *
             <button
                type="button"
                class="btn btn-info"
                ngbTooltip="Waiting for text."
                tooltipClass="form-tooltip"
              >
                <i class="info-icon" aria-hidden="true"></i>
                <span class="sr-only">Click here for more information</span>
              </button>
          </label>
          <ng-select
            name="transactionType"
            class="transaction-type-select"
            placeholder="You must select a transaction category first."
            [items]="transactionTypes"
            bindLabel="text"
            bindValue="value"
            formControlName="transactionType"
          >
          </ng-select>
          <div
            class="error-text"
            *ngIf="(frmIndividualReceipt.invalid && (frmIndividualReceipt.dirty || frmIndividualReceipt.touched))"
          >
            <div
              class="text-error text-left"
              *ngIf="frmIndividualReceipt.controls.transactionType.errors?.required"
            >
              You must select a transaction type.
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngFor="let row of formFields">
        <div class="row">
          <ng-container *ngIf="isArray(row.cols)">
            <div class="col" *ngFor="let col of row.cols">
              <div class="form-group">
                <label for="{{ col.name }}">
                  {{ col.text }}
                  <ng-container *ngIf="col.required">
                    *
                  </ng-container>
                 <button
                    type="button"
                    class="btn btn-info"
                    ngbTooltip="{{ col.infoText }}"
                    tooltipClass="form-tooltip"
                    *ngIf="col.infoIcon"
                  >
                    <i class="info-icon" aria-hidden="true"></i>
                    <span class="sr-only">Click here for more information</span>
                  </button>
                </label>
                <ng-container
                  *ngIf="col.type === 'text' || col.type === 'date' || col.type === 'number'"
                >
                  <input
                    type="{{ col.type }}"
                    name="{{ col.name }}"
                    class="form-control"
                    [formControlName]="col.name"
                  />
                </ng-container>
                <ng-container *ngIf="col.type === 'textarea'">
                  <textarea
                    class="form-control"
                    rows="5"
                    name="{{ col.name }}"
                    [formControlName]="col.name"
                  ></textarea>
                </ng-container>
                <ng-container *ngIf="col.type === 'select' && col.name === 'contributorState'">
                  <ng-select
                    class="state-select"
                    [formControlName]="col.name"
                  >
                    <ng-option
                      *ngFor="let item of states"
                      [value]="item.code"
                    >
                      {{ item.name }}
                    </ng-option>
                  </ng-select>
                </ng-container>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-container>
    </section>
    <footer>
      <footer>
        <div class="grid-row">
          <div class="grid-row__col grid-row__col--12">
              <div class="forms__btn-container">
                <button
                  class="btn btn-secondary btn-right"
                  type="submit"
                >
                  Save &amp; Add Transaction
                </button>
                <button
                  class="btn btn-default btn-right"
                  type="button"
                  (click)="previous()"
                >
                  View Transactions
                </button>
              </div>
          </div>
        </div>
      </footer>
    </footer>
  </form>
</div>
