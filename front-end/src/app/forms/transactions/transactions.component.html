<div class="transactions__main-container">
  <div class="transactions__sidebar">
    <div class="transactions__sidebar_categories">
      <app-transaction-categories [hidden]="isShowFilters"
        title="Transaction Categories"
        (status)='onNotify($event)'>
      </app-transaction-categories>
    </div>
    <div class="transactions__sidebar_filters">
      <app-transactions-filter [hidden]="!isShowFilters" 
        title="Filters"
        [formType]="formType">
      </app-transactions-filter>
    </div>
  </div>
  <div class="transactions__container">
    <header>
      <div class="header-content">
        <div class="float-left">
          <h1 *ngIf="!isEditViewActive(); else editHeading">Transactions / Form {{formType}}
            <span [@fadeInOut] *ngIf="isRecycleBinViewActive()"> / Recycling Bin
              <span class="trash-icon"></span>
            </span>
          </h1>
          <ng-template #editHeading>
            <h1 [@fadeInOut] *ngIf="isEditViewActive()">Form {{formType}} / {{transactionToEdit.type}} / Edit</h1>
          </ng-template>
        </div>
        <div class="float-right">
          <button [@fadeInOut] *ngIf="isShowFilters" class="btn btn-primary btn-right" type="submit"
            (click)="showCategories()">
            Return to Transaction Categories
          </button>
        </div>
      </div>
      <hr />
    </header>
    <div>
      <div *ngIf="!isEditViewActive()">
        <div class="grid-row">
          <div class="grid-row__col grid-row__col--12">
            <div class="transactions__btn-container">
              <button [@fadeInOut] *ngIf="isTransactionViewActive()"
                class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="showPinColumns()">
                <i class="thumbtack-icon"></i>
                Pin Columns
              </button>
              <button [@fadeInOut] *ngIf="isTransactionViewActive()"
                class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="showRecycleBin()">
                <i class="trash-icon"></i>
                Recycle Bin
              </button>
              <button [@fadeInOut] *ngIf="isTransactionViewActive()"
                class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="doImport()">
                <i class="file-import-icon"></i>
                Import
              </button>
              <button [@fadeInOut] *ngIf="isTransactionViewActive()"
                class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="showFilters()">
                <i class="filter-icon"></i>
                Filter
              </button>
              <button [@fadeInOut] *ngIf="isRecycleBinViewActive()"
                  class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="showTransactions()">
                  <i class="table-icon"></i>
                  Transactions
              </button>
              <button [@fadeInOut] *ngIf="isRecycleBinViewActive()"
                class="btn btn-primary btn-left transactions__trx-btn" type="button" (click)="showFilters()">
                <i class="filter-icon"></i>
                Filter
              </button>               
              <div class="input-group pl-0 transactions__trx-search">
                <div class="input-group-append" (click)="clearSearch()" 
                    ngbTooltip="Clear Keywords" tooltipClass="form-tooltip">
                  <span class="input-group-text" id="">
                    <i class="fas fa-eraser text-grey" aria-hidden="true"></i>
                  </span>
                </div>                
                <input class="form-control py-1" type="text" placeholder="Search All" 
                  [(ngModel)]="searchText" aria-label="Search">
                <div class="input-group-append" (click)="search()"
                    ngbTooltip="Search All" tooltipClass="form-tooltip">
                  <span class="input-group-text" id="">
                    <!-- <i class="search-icon text-grey" aria-hidden="true"></i> no longer working?-->
                    <i class="fas fa-search text-grey" aria-hidden="true"></i>
                  </span>
                </div>
              </div>              
            </div>
          </div>
        </div>
        <div class="grid-row">
          <div class="grid-row__col grid-row__col--12">
            <div class="transactions__btn-container">
              <div *ngFor="let searchTextItem of searchTextArray; let i = index">
                <button
                  class="btn btn-left transactions__btn-search-filter transactions__btn-container;"
                  (click)="removeSearchText(i)">
                  <i class="fas fa-window-close"></i>
                  {{ searchTextItem }}
                </button>
                <span class="transactions__btn-search-filter-join" 
                  *ngIf="i < (searchTextArray.length -1 )">
                    or
                </span>
              </div>
            </div>          
          </div>
        </div>
      </div>
      <app-transactions-table 
        *ngIf="isTransactionViewActive()"
        formType="{{formType}}" 
        reportId="{{reportId}}"
        tableType="{{transactionsView}}">
      </app-transactions-table>
      <app-transactions-table
        *ngIf="isRecycleBinViewActive()"
        formType="{{formType}}"
        reportId="{{reportId}}" 
        tableType="{{recycleBinView}}">
      </app-transactions-table>
      <app-transactions-edit
        *ngIf="isEditViewActive()"
        [transactionToEdit]="transactionToEdit"
        formType="{{formType}}"
        reportId="{{reportId}}">
      </app-transactions-edit>
    </div>
  </div>
</div>